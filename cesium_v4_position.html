<script src="<https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.js>"></script>
<link rel="stylesheet" href="<https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.css>" />

<script>
let map;
let marker;

function initMap(lat, lon) {
  map = L.map('map').setView([lat, lon], 13);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '© OpenStreetMap contributors'
  }).addTo(map);
  marker = L.marker([lat, lon]).addTo(map);
}

if ("geolocation" in navigator) {
  console.log('瀏覽器支援 Geolocation');
  document.getElementById('geolocation').addEventListener('click', function () {
    function successCallback(position) {
      const latitude = position.coords.latitude;
      const longitude = position.coords.longitude;
      initMap(latitude, longitude);
      console.log(`緯度：${latitude}，經度：${longitude}`);
    }

    function errorCallback(error) {
      console.error(`錯誤：${error.message}`);
    }
    navigator.geolocation.getCurrentPosition(successCallback, errorCallback, options);
  });
} else {
  console.log('瀏覽器不支援 Geolocation');
}
</script>